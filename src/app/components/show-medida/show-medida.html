<div class="card flex justify-center">
    <p-dialog
        header="Detalle Lectura"
        [(visible)]="visible"
        [modal]="true"
        [dismissableMask]="true"
        [style]="{ width: '45rem' }"
        (onHide)="cerrar()"
    >
        @if (medida) {
          <div class="m-2" [ngClass]="{'edit-mode': isEditMode}">
            <div class="grid grid-cols-2 gap-4">
              <p-floatlabel variant="on" class="w-full mb-3">
                <input pInputText [value]="medida.nombreHito" class="w-full h-12" readonly />
                <label>Nombre Hito</label>
              </p-floatlabel>
              <p-floatlabel variant="on" class="w-full mb-3">
                @if (isEditMode) {
                  <input pInputText [(ngModel)]="editForm.este" type="number" step="0.001" class="w-full h-12" />
                } @else {
                  <input pInputText [value]="medida.este | number:'1.4-4'" class="w-full h-12" readonly />
                }
                <label>Este</label>
              </p-floatlabel>
              <p-floatlabel variant="on" class="w-full mb-3">
                @if (isEditMode) {
                  <input pInputText [(ngModel)]="editForm.norte" type="number" step="0.001" class="w-full h-12" />
                } @else {
                  <input pInputText [value]="medida.norte | number:'1.4-4'" class="w-full h-12" readonly />
                }
                <label>Norte</label>
              </p-floatlabel>
              <p-floatlabel variant="on" class="w-full mb-3">
                @if (isEditMode) {
                  <input pInputText [(ngModel)]="editForm.elevacion" type="number" step="0.001" class="w-full h-12" />
                } @else {
                  <input pInputText [value]="medida.elevacion | number:'1.4-4'" class="w-full h-12" readonly />
                }
                <label>Elevaci√≥n</label>
              </p-floatlabel>
              <p-floatlabel variant="on" class="w-full mb-3">
                <input pInputText [value]="medida.horizontalAbsoluto | number:'1.2-2'" class="w-full h-12" readonly />
                <label>Horizontal Absoluto</label>
              </p-floatlabel>
              <p-floatlabel variant="on" class="w-full mb-3">
                <input pInputText [value]="medida.verticalAbsoluto | number:'1.2-2'" class="w-full h-12" readonly />
                <label>Vertical Absoluto</label>
              </p-floatlabel>
              <p-floatlabel variant="on" class="w-full mb-3">
                <input pInputText [value]="medida.totalAbsoluto | number:'1.2-2'" class="w-full h-12" readonly />
                <label>Total Absoluto</label>
              </p-floatlabel>
              <p-floatlabel variant="on" class="w-full mb-3">
                <input pInputText [value]="medida.acimutAbsoluto | number:'1.2-2'" class="w-full h-12" readonly />
                <label>Acimut Absoluto</label>
              </p-floatlabel>
              <p-floatlabel variant="on" class="w-full mb-3">
                <input pInputText [value]="medida.buzamientoAbsoluto | number:'1.2-2'" class="w-full h-12" readonly />
                <label>Buzamiento Absoluto</label>
              </p-floatlabel>
              <p-floatlabel variant="on" class="w-full mb-3">
                <input pInputText [value]="medida.horizontalRelativo | number:'1.2-2'" class="w-full h-12" readonly />
                <label>Horizontal Relativo</label>
              </p-floatlabel>
              <p-floatlabel variant="on" class="w-full mb-3">
                <input pInputText [value]="medida.verticalRelativo | number:'1.2-2'" class="w-full h-12" readonly />
                <label>Vertical Relativo</label>
              </p-floatlabel>
              <p-floatlabel variant="on" class="w-full mb-3">
                <input pInputText [value]="medida.totalRelativo | number:'1.2-2'" class="w-full h-12" readonly />
                <label>Total Relativo</label>
              </p-floatlabel>
              <p-floatlabel variant="on" class="w-full mb-3">
                <input pInputText [value]="medida.acimutRelativo | number:'1.2-2'" class="w-full h-12" readonly />
                <label>Acimut Relativo</label>
              </p-floatlabel>
              <p-floatlabel variant="on" class="w-full mb-3">
                <input pInputText [value]="medida.buzamientoRelativo | number:'1.2-2'" class="w-full h-12" readonly />
                <label>Buzamiento Relativo</label>
              </p-floatlabel>
              <p-floatlabel variant="on" class="w-full mb-3">
                <input pInputText [value]="medida.horizontalAcumulado | number:'1.2-2'" class="w-full h-12" readonly />
                <label>Horizontal Acumulado</label>
              </p-floatlabel>
              <p-floatlabel variant="on" class="w-full mb-3">
                <input pInputText [value]="medida.velocidadMedia | number:'1.2-2'" class="w-full h-12" readonly />
                <label>Velocidad Media</label>
              </p-floatlabel>
              <p-floatlabel variant="on" class="w-full mb-3">
                <input pInputText [value]="medida.inversaVelocidadMedia | number:'1.2-2'" class="w-full h-12" readonly />
                <label>Inversa Velocidad Media</label>
              </p-floatlabel>
              <p-floatlabel variant="on" class="w-full mb-3">
                @if (isEditMode) {
                  <p-datepicker [(ngModel)]="editForm.fechaMedicion" dateFormat="dd/mm/yy" [showIcon]="true" inputStyleClass="w-full h-12"
                    placeholder="Seleccione una fecha" class="w-full" inputId="fechaMedicion" />
                } @else {
                  <input pInputText [value]="medida.fechaMedicion | date:'dd/MM/yyyy'" class="w-full h-12" readonly />
                }
                <label for="fechaMedicion">Fecha Medicion</label>
              </p-floatlabel>
            </div>
          </div>
        }
        <div class="flex justify-end gap-2 mt-4">
            @if (isEditMode) {
              <p-button label="Cancelar" severity="secondary" (click)="cancelEdit()" [disabled]="isLoading" />
              <p-button label="Guardar" severity="success" (click)="saveChanges()" [loading]="isLoading" />
            } @else {
              <p-button label="Editar" severity="info" (click)="enableEditMode()" />
              <p-button label="Cerrar" severity="secondary" (click)="cerrar()" />
            }
        </div>
    </p-dialog>
</div>